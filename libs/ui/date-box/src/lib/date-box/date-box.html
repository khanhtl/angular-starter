<div class="date-box-container" #container>
    @if (label()) {
    <label class="date-box-label">{{ label() }}</label>
    }

    <div class="input-group" [class.focused]="isOpen()" [class]="'size-' + size()">
        <input type="text" [formControl]="inputControl" [placeholder]="activePlaceholder()" [appDateInput]="format()"
            (blur)="onInputBlur()" (focus)="isOpen.set(true)" class="date-input" [class]="'size-' + size()" />


        @if (dateValue() && !inputControl.disabled) {
        <button class="clear-btn" (click)="onDateSelect(null); $event.stopPropagation()" type="button">
            <i-lucide [img]="XIcon" [size]="14"></i-lucide>
        </button>
        }

        <button class="picker-btn" (click)="toggleCalendar($event)" type="button">
            @if (type() === 'time') {
            <i-lucide [img]="ClockIcon" [size]="18"></i-lucide>
            } @else {
            <i-lucide [img]="CalendarIcon" [size]="18"></i-lucide>
            }
        </button>
    </div>

    <!-- Dropdown -->
    @if (isOpen()) {
    <div class="calendar-dropdown">
        <app-calendar [value]="dateValue()" (valueChange)="onDateSelect($event)" [mode]="type()">
        </app-calendar>
    </div>
    }
</div>