<div class="page-container">
    <header class="page-header">
        <h1>Button</h1>
        <p>Interactive button component supporting multiple variants, sizes, states, and dropdown interactions.</p>
    </header>

    <nav class="tab-nav">
        <button [class.active]="activeTab() === 'preview'" (click)="activeTab.set('preview')">Preview</button>
        <button [class.active]="activeTab() === 'api'" (click)="activeTab.set('api')">API Reference</button>
    </nav>

    <div class="tab-content">
        @if (activeTab() === 'preview') {

        <!-- Interactive Playground -->
        <div class="demo-section">
            <div class="playground-grid">
                <div class="demo-card"
                    style="min-height: 400px; display: flex; flex-direction: column; justify-content: center; align-items: center;">
                    <div class="preview-area" style="border: none; background: transparent; padding: 40px;">
                        <app-button [variant]="config().variant" [color]="config().color" [size]="config().size"
                            [loading]="config().loading" [disabled]="config().disabled" [ripple]="config().ripple"
                            [dropdown]="config().dropdown" [items]="config().dropdown ? mockItems : undefined">

                            @if (config().size === 'icon') {
                            <i-lucide [img]="SendIcon" [size]="18"></i-lucide>
                            } @else {
                            @if (config().showIcon) {
                            <i-lucide [img]="SendIcon" [size]="config().size === 'sm' ? 14 : 16"
                                style="margin-right: 8px"></i-lucide>
                            }
                            {{ config().text }}
                            }
                        </app-button>
                    </div>

                    <div class="code-section" style="margin-top: 48px; width: 100%;">
                        <div
                            style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px; padding: 0 16px;">
                            <h3 style="margin: 0; font-size: 0.9rem; color: #64748b;">Source Code</h3>
                            <app-button variant="ghost" size="sm" (click)="toggleCode()">
                                <i-lucide [img]="showCode() ? EyeOffIcon : CodeIcon" [style.marginRight.px]="8"
                                    [size]="16"></i-lucide>
                                {{ showCode() ? 'Hide Code' : 'Show Code' }}
                            </app-button>
                        </div>

                        @if (showCode()) {
                        <div #codeEditor class="code-editor-container"
                            style="border: 1px solid var(--c-border); border-radius: 8px; overflow: hidden; margin: 0 16px;">
                        </div>
                        }
                    </div>
                </div>

                <!-- Controls Panel -->
                <div class="controls-panel">
                    <h3 style="margin-top: 0; margin-bottom: 1rem; font-size: 1.1rem;">Properties</h3>

                    <div class="control-group">
                        <app-input label="Button Text" [ngModel]="config().text"
                            (ngModelChange)="updateConfig('text', $event)"></app-input>
                    </div>

                    <div class="control-group">
                        <app-select-box label="Variant" [dataSource]="variants" displayExpr="text" valueExpr="value"
                            [ngModel]="config().variant"
                            (ngModelChange)="updateConfig('variant', $event)"></app-select-box>
                    </div>

                    <div class="control-group">
                        <app-select-box label="Color" [dataSource]="colors" displayExpr="text" valueExpr="value"
                            [ngModel]="config().color" (ngModelChange)="updateConfig('color', $event)"></app-select-box>
                    </div>

                    <div class="control-group">
                        <app-select-box label="Size" [dataSource]="sizes" displayExpr="text" valueExpr="value"
                            [ngModel]="config().size" (ngModelChange)="updateConfig('size', $event)"></app-select-box>
                    </div>

                    <div class="control-group"
                        style="padding-top: 8px; border-top: 1px solid var(--c-border); display: flex; flex-direction: column; gap: 8px;">
                        <app-check-box text="Loading State" [ngModel]="config().loading"
                            (ngModelChange)="updateConfig('loading', $event)"></app-check-box>
                        <app-check-box text="Disabled" [ngModel]="config().disabled"
                            (ngModelChange)="updateConfig('disabled', $event)"></app-check-box>
                        <app-check-box text="Ripple Effect" [ngModel]="config().ripple"
                            (ngModelChange)="updateConfig('ripple', $event)"></app-check-box>
                        <app-check-box text="Show Icon" [ngModel]="config().showIcon"
                            (ngModelChange)="updateConfig('showIcon', $event)"
                            [disabled]="config().size === 'icon'"></app-check-box>
                    </div>

                    <div class="control-group" style="padding-top: 8px; border-top: 1px solid var(--c-border);">
                        <app-check-box text="Dropdown Menu (Split)" [ngModel]="config().dropdown"
                            (ngModelChange)="updateConfig('dropdown', $event)"></app-check-box>
                    </div>
                </div>
            </div>
        </div>

        <div class="demo-section">
            <h2>Common Examples</h2>
            <div class="card-grid"
                style="display: grid; grid-template-columns: repeat(auto-fill, minmax(340px, 1fr)); gap: 1.5rem;">
                <!-- States -->
                <div class="preview-card"
                    style="background: var(--c-surface); border: 1px solid var(--c-border); border-radius: 0.75rem; padding: 1.5rem;">
                    <h3 style="margin-top: 0; font-size: 1rem; color: #64748b;">States & Indicators</h3>
                    <div style="display: flex; gap: 12px; flex-wrap: wrap; margin-top: 1rem;">
                        <app-button [loading]="isLoading()" (click)="toggleLoading()">
                            Save Changes
                        </app-button>
                        <app-button variant="outline" color="danger" disabled>
                            Not Allowed
                        </app-button>
                    </div>
                </div>

                <!-- Dropdowns -->
                <div class="preview-card"
                    style="background: var(--c-surface); border: 1px solid var(--c-border); border-radius: 0.75rem; padding: 1.5rem;">
                    <h3 style="margin-top: 0; font-size: 1rem; color: #64748b;">Menus & Actions</h3>
                    <div style="display: flex; gap: 12px; flex-wrap: wrap; margin-top: 1rem;">
                        <app-button dropdown [items]="mockItems" color="primary">
                            Actions
                        </app-button>
                        <app-button variant="solid" color="secondary" [items]="mockItems" dropdown>
                            Management
                        </app-button>
                    </div>
                </div>

                <!-- Icons usage -->
                <div class="preview-card"
                    style="background: var(--c-surface); border: 1px solid var(--c-border); border-radius: 0.75rem; padding: 1.5rem;">
                    <h3 style="margin-top: 0; font-size: 1rem; color: #64748b;">Icon Positions</h3>
                    <div style="display: flex; gap: 12px; flex-wrap: wrap; margin-top: 1rem;">
                        <app-button>
                            <i-lucide [img]="SaveIcon" [size]="16" style="margin-right: 8px"></i-lucide>
                            Save
                        </app-button>
                        <app-button variant="ghost" size="icon">
                            <i-lucide [img]="TrashIcon" [size]="18" style="color: #ef4444"></i-lucide>
                        </app-button>
                        <app-button variant="outline">
                            Continue
                            <i-lucide [img]="ArrowIcon" [size]="16" style="margin-left: 8px"></i-lucide>
                        </app-button>
                    </div>
                </div>
            </div>
        </div>
        }

        @if (activeTab() === 'api') {
        <div class="api-section">
            <h2>app-button API Reference</h2>
            <table class="api-table">
                <thead>
                    <tr>
                        <th>Property</th>
                        <th>Type</th>
                        <th>Default</th>
                        <th>Description</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>variant</td>
                        <td class="type-cell">'solid' | 'outline' | 'ghost' | 'link'</td>
                        <td class="default-cell">'solid'</td>
                        <td>The visual style of the button.</td>
                    </tr>
                    <tr>
                        <td>color</td>
                        <td class="type-cell">'primary' | 'secondary' | 'success' | 'warning' | 'danger' | 'info' |
                            'neutral'</td>
                        <td class="default-cell">'primary'</td>
                        <td>The color theme of the button.</td>
                    </tr>
                    <tr>
                        <td>size</td>
                        <td class="type-cell">'sm' | 'md' | 'lg' | 'icon'</td>
                        <td class="default-cell">'md'</td>
                        <td>Adjusts padding and font size.</td>
                    </tr>
                    <tr>
                        <td>loading</td>
                        <td class="type-cell">boolean</td>
                        <td class="default-cell">false</td>
                        <td>Shows a spinner and disables interaction.</td>
                    </tr>
                    <tr>
                        <td>disabled</td>
                        <td class="type-cell">boolean</td>
                        <td class="default-cell">false</td>
                        <td>Standard HTML disabled state.</td>
                    </tr>
                    <tr>
                        <td>ripple</td>
                        <td class="type-cell">boolean</td>
                        <td class="default-cell">false</td>
                        <td>Enables Material Design ripple effect.</td>
                    </tr>
                    <tr>
                        <td>dropdown</td>
                        <td class="type-cell">boolean</td>
                        <td class="default-cell">false</td>
                        <td>Enables dropdown menu and forces split layout.</td>
                    </tr>
                    <tr>
                        <td>split</td>
                        <td class="type-cell">boolean</td>
                        <td class="default-cell">false</td>
                        <td>Forces split layout (now included by default when dropdown is enabled).</td>
                    </tr>
                    <tr>
                        <td>items</td>
                        <td class="type-cell">DropdownItem[]</td>
                        <td class="default-cell">[]</td>
                        <td>Items to display in the dropdown menu.</td>
                    </tr>
                </tbody>
            </table>
        </div>
        }
    </div>
</div>